#!/usr/bin/env ruby

require_relative '../lib/gifr'
require 'optparse'

options = {}
parser = OptionParser.new do |opts|
  opts.banner = "Usage: "

  opts.on("-h", "--help", "Show usage informations") do |v|
    puts opts.banner
    exit(0)
  end

  opts.on("-f n", "--from=n", "") do |v|
    options[:from] = v
  end

  opts.on("-t n", "--to=n", "") do |v|
    options[:to] = v
  end

  opts.on("-s n", "--size=n", "") do |v|
    options[:size] = v
  end
end

parser.parse!

filename = ARGV.pop

options.merge!(filename: filename)

errors = OptionsValidator.new(options).validate!

if errors.any?
  puts parser.banner
  exit(1)
end
